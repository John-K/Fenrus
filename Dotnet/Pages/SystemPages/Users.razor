@page "/settings/system/users"
@namespace Fenrus.Pages
@inherits CommonPage<Fenrus.Models.User>

<PageTitle>Fenrus - @Title</PageTitle>

<FenrusPage Title="@Title" Icon="fa-solid fa-user-group" PageDescription="@Description">
    <Buttons>
        <div class="allow-register">
            <span class="label allow-register-label">Allow Registrations:</span>
            <FenrusSwitch @bind-Value="AllowRegistrations" />
        </div>
    </Buttons>
    <Body>

    <FenrusTable @ref=Table TItem="Models.User" Data=@Items>
        <Columns>
            <FenrusTableColumn TItem="Models.User" ColumnName="Name">
                <Header>Name</Header>
                <Cell Context="item">
                    <i class="fa-solid fa-user"></i>
                    <span>@item.Name</span>
                </Cell>
            </FenrusTableColumn>
            <FenrusTableColumn TItem="Models.User" ColumnName="Admin" Width="10rem">
                <Header>Admin</Header>
                <Cell Context="item">
                    <FenrusSwitch Value="item.IsAdmin" Disabled="IsSelf(item)" ValueChanged="(value) => AdminUpdated(item, value)"></FenrusSwitch>
                </Cell>
            </FenrusTableColumn>
            <FenrusTableColumn TItem="Models.User" ColumnName="Actions" Width="10rem">
                <Header></Header>
                <Cell Context="item">
                    @if (IsSelf(item) == false)
                    {
                        // only allow deleting of other users, they cannot delete themselves
                        <div class="actions">
                            <span title="Delete" class="fa-solid fa-trash" @onclick="() => Remove(item)"></span>
                        </div>
                    }
                </Cell>
            </FenrusTableColumn>
        </Columns>
    </FenrusTable>

    </Body>
</FenrusPage>